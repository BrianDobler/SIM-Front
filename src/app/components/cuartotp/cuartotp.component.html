<div class="container">
    <div class="row m-3">
        <div class="panel-heading"><br>
            <h3>
                <p class="text-center">Simulacion Montecarlo</p>
            </h3>
        </div>
    </div>

    <!-- Select a random number generator for the distribution values -->
    <div class="row justify-content-center m-4">
        <div class="col col-4">
            <button type="button" class="btn btn-secondary">
                Seleccione el generador a utilizar
            </button>
        </div>
        <div class="col col-2">
            <input (click)="setGenerator('native-generator')" type="radio" class="btn-check" name="options-outlined"
                id="success-outlined" autocomplete="off" checked>
            <label class="btn btn-outline-success" for="success-outlined">Generador Nativo</label>
        </div>
        <div class="col col-6">
            <input (click)="setGenerator('congruential-generator')" type="radio" class="btn-check"
                name="options-outlined" id="danger-outlined" autocomplete="off">
            <label class="btn btn-outline-danger" for="danger-outlined">Generador Congruencial Lineal</label>
        </div>
    </div>

    <!-- Render the fields to set the linear congruential generator -->
    <form [formGroup]="generatorForm" class="container m-4" *ngIf="generatorType === 'congruential-generator'">
        <div class="row">
            <div class="col">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1">Semilla</span>
                    <input type="number" class="form-control" placeholder="Semilla" formControlName="seed">
                    <div class="valid-feedback d-block" *ngIf="generatorForm.controls['seed'].valid">Looks good!</div>
                    <div class="invalid-feedback d-block" *ngIf="generatorForm.controls['seed'].invalid && generatorForm.controls['seed'].touched">Campo inválido</div>
                </div>
            </div>

            <div class="col">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1">Módulo</span>
                    <input type="number" class="form-control" placeholder="Módulo" formControlName="mod">
                    <div class="valid-feedback d-block" *ngIf="generatorForm.controls['mod'].valid">Looks good!</div>
                    <div class="invalid-feedback d-block" *ngIf="generatorForm.controls['mod'].invalid && generatorForm.controls['mod'].touched">Campo inválido</div>
                </div>
            </div>

            <div class="col">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1">A</span>
                    <input type="number" class="form-control" placeholder="A" formControlName="a">
                    <div class="valid-feedback d-block" *ngIf="generatorForm.controls['a'].valid">Looks good!</div>
                    <div class="invalid-feedback d-block" *ngIf="generatorForm.controls['a'].invalid && generatorForm.controls['a'].touched">Campo inválido</div>
                </div>
            </div>

            <div class="col">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1">C</span>
                    <input type="number" class="form-control" placeholder="C" formControlName="c">
                    <div class="valid-feedback d-block" *ngIf="generatorForm.controls['c'].valid">Looks good!</div>
                    <div class="invalid-feedback d-block" *ngIf="generatorForm.controls['c'].invalid && generatorForm.controls['c'].touched">Campo inválido</div>
                </div>
            </div>
        </div>
    </form>

    <!-- Renderiza un botón por cada tarea. -->
    <div class="row justify-content-start m-3" *ngFor="let task of tasks">
        <!-- Activity name -->
        <div class="col col-2">
            <button type="button" class="btn btn-secondary">
                {{ task.name }}
            </button>
        </div>

        <!-- Distribution selector -->
        <div class="col col-4">
            <select class="form-select" #nomselec (change)='task.selectDistribution(nomselec.value)'
                aria-label="Default select example">
                <option selected hidden>Default: {{ task.distributionType }}</option>
                <option value="uniform">Uniforme</option>
                <option value="exponential">Exponencial</option>
                <option value="normal">Normal</option>
            </select>
        </div>

        <!-- Depends on the distribution selected for each task -->
        <!-- Uniform distribution -->
        <div class="col col-6" *ngIf="task.distributionType === 'uniform'">
            <form [formGroup]="task.distributionForm">
                <div class="container">
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">A</span>
                        <input type="number" class="form-control" placeholder="A" formControlName="A">

                        <span class="input-group-text" id="basic-addon1">B</span>
                        <input type="number" class="form-control" placeholder="B" formControlName="B">
                    </div>
                </div>
            </form>
        </div>

        <!-- Normal distribution -->
        <div class="col col-6" *ngIf="task.distributionType === 'normal'">
            <form [formGroup]="task.distributionForm">
                <div class="container">
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">Mu</span>
                        <input type="number" class="form-control" placeholder="Mu" formControlName="mu">

                        <span class="input-group-text" id="basic-addon1">Sigma</span>
                        <input type="number" class="form-control" placeholder="Sigma" formControlName="sigma">
                    </div>
                </div>
            </form>
        </div>

        <!-- Exponential distribution -->
        <div class="col col-6" *ngIf="task.distributionType === 'exponential'">
            <form [formGroup]="task.distributionForm">
                <div class="container">
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">Lambda</span>
                        <input type="number" class="form-control" placeholder="Lambda" formControlName="lambda">
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Get the parameters of the montecarlo simulation -->
    <div class="row justify-content-start m-3 p-5">
        <form [formGroup]="simulationForm" class="col">
            <div class="input-group">
                <span class="input-group-text" id="basic-addon1">Número de simulaciones</span>
                <input type="number" class="form-control" formControlName="numberOfSimulations">
            </div>
        </form>
        
        <div class="col">
            <button type="button" (click)="submitAll()" [disabled]="!generatorForm.valid" class="btn btn-outline-dark">Simular</button>
        </div>
        <div class="col">
            <button type="button" (click)="submitAll()" class="btn btn-outline-dark">Simular</button>
        </div>
    </div>

    <!-- Simulation Results -->
    <div class="row">
        <!-- Acá va la tabla de la simulación montecarlo -->
    </div>
</div>